<div class="container-fluid overflow-y-auto mb-4 " style="height: 100vh; padding-bottom: 150px">
<!-- Header -->
<header class="d-flex fixed-top justify-content-between align-items-center p-3 text-white" style="background: linear-gradient(to bottom right, #d4f0ff, #f4fafe);">
    <div class="align-content-start ">
        <h5 class="mb-2 text-success">Welcome <span id="username"></span>!</h5>
        <h2 class="mb-0 text-dark">Find Your Doctor</h2>
    </div>
    <img src="" alt="Profile" class="rounded-circle user userImg" style="width: 50px; height: 50px; object-fit: cover;">
</header>

<!-- Search -->
<div class="container position-relative animate-slide-up" style="margin-top: 130px">
    <input type="text" class="form-control rounded-pill ps-4 pe-5"  style="height: 45px; opacity: 0.7" placeholder="Search..." id="searchBox">
    <i class="fas fa-search position-absolute top-50 end-0 translate-middle-y me-4 text-muted"></i>
</div>

    <!-- Free Doctors -->
    <section class="container my-4 animate-slide-up">
        <h4 class="mb-3">Free Doctors</h4>
        <div class="d-flex gap-3 overflow-auto">
            <div class="position-relative">
                <img src="/images/images medecins/docteur (10).jpg" class="rounded shadow" style="width: 100px; height: 120px; object-fit: cover;object-position: top">
                <span class="badge bg-success position-absolute top-0 start-0 m-1">available</span>
            </div>
            <div class="position-relative">
                <img src="/images/images medecins/newmedecin (9).jpg" class="rounded shadow" style="width: 100px; height: 120px; object-fit: cover;object-position: top">
                <span class="badge bg-success position-absolute top-0 start-0 m-1">available</span>
            </div>
            <div class="position-relative">
                <img src="/images/images medecins/docta (3).jpg" class="rounded shadow" style="width: 100px; height: 120px; object-fit: cover;object-position: top">
                <span class="badge bg-success position-absolute top-0 start-0 m-1">available</span>
            </div>
        </div>
    </section>

    <!-- Categories -->
    <section class="container my-4 animate-slide-up">
        <div class="d-flex justify-content-around">
            <div class="bg-primary text-white rounded-circle d-flex justify-content-center align-items-center" style="width: 60px; height: 60px;"><i class="fas fa-tooth"></i></div>
            <div class="bg-success text-white rounded-circle d-flex justify-content-center align-items-center" style="width: 60px; height: 60px;"><i class="fas fa-notes-medical"></i></div>
            <div class="bg-danger text-white rounded-circle d-flex justify-content-center align-items-center" style="width: 60px; height: 60px;"><i class="fas fa-eye"></i></div>
            <div class="bg-warning text-white rounded-circle d-flex justify-content-center align-items-center" style="width: 60px; height: 60px;"><i class="fas fa-heartbeat"></i></div>
        </div>
    </section>

    <!-- Popular Doctors -->
    <section class="container my-4 animate-slide-up">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h4 class="mb-0">Popular Doctors</h4>
            <a href="#" class="text-secondary small">See all</a>
        </div>
        <div class="d-flex gap-3 overflow-auto">
            <div class="card text-center" style="min-width: 150px;">
                <img src="/images/images medecins/medecin (1).jpg" class="card-img-top" style="height: 100px; object-fit: cover;">
                <div class="card-body">
                    <h6 class="card-title mb-1">Dr. Steve Jordan</h6>
                    <p class="card-text small">Medicine Specialist</p>
                    <div>⭐⭐⭐⭐⭐</div>
                </div>
            </div>
            <div class="card text-center" style="min-width: 150px;">
                <img src="/images/images medecins/medecin (6).jpg" class="card-img-top" style="height: 100px; object-fit: cover;object-position: top">
                <div class="card-body">
                    <h6 class="card-title mb-1">Dr. Ebenezer</h6>
                    <p class="card-text small">Dentist Specialist</p>
                    <div>⭐⭐⭐⭐</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Doctors -->
    <section class="container my-4 animate-slide-up">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h4 class="mb-0">Featured Doctors</h4>
            <a href="#" class="text-secondary small">See all</a>
        </div>
        <div class="d-flex gap-3 overflow-x-auto">
            <div class="card text-center" style="min-width: 150px;">
                <img src="/images/images medecins/medecin (8).jpg" class="rounded-circle mx-auto mt-3" style="width: 100px; height: 100px; object-fit: cover;">
                <div class="card-body">
                    <h6 class="card-title">Dr. Bello</h6>
                    <p class="card-text small"><i class="fas fa-star text-warning"></i> 5.0 (120 Reviews)</p>
                </div>
            </div>
            <div class="card text-center" style="min-width: 150px;">
                <img src="/images/images medecins/medecin (10).jpg" class="rounded-circle mx-auto mt-3" style="width: 100px; height: 100px; object-fit: cover;">
                <div class="card-body">
                    <h6 class="card-title">Dr. Bello</h6>
                    <p class="card-text small"><i class="fas fa-star text-warning"></i> 5.0 (220 Reviews)</p>
                </div>
            </div>
        </div>
    </section>


    <nav class="navbar fixed-bottom bg-white border-top shadow-sm">
        <div class="container-fluid d-flex justify-content-around" id="bottom-nav">
            <a onclick="goTo(event, '/Home')" class="text-success fs-4 text-decoration-none d-flex flex-column align-items-center">
                <i class="fas fa-home"></i>
                <small>Home</small>
            </a>

            <a onclick="goTo(event, '/consultation-requests')" class="text-muted fs-4 text-decoration-none d-flex flex-column align-items-center">
                <i class="fas fa-stethoscope"></i>
                <small>Consult</small>
            </a>

            <a onclick="goTo(event, '/notifications')" class="text-muted fs-4 text-decoration-none d-flex flex-column align-items-center">
                <i class="fas fa-bell"></i>
                <small>Alerts</small>
            </a>

            <!-- Medical Staff Section (conditionally shown) -->
            <a onclick="goTo(event, '/medical-dashboard')" id="medical-link" class="text-muted fs-4 text-decoration-none d-flex flex-column align-items-center d-none">
                <i class="fas fa-user-md"></i>
                <small>Staff</small>
            </a>
        </div>
    </nav>
    <div class="sidebar pt-4">
        <div class="profile">
            <img src="" alt="User" class="avatar userImg"/>
            <div class="details">
                <h2 id="details_name"></h2>
            </div>
            <button class="close-btn"><i class="fas fa-times"></i></button>
        </div>
        <ul class="menu">
            <li><i class="fas fa-user-md"></i> My Doctors</li>
            <li><i class="fas fa-clipboard"></i> Medical Records</li>
            <li><i class="fas fa-credit-card"></i> Payments</li>
            <li><i class="fas fa-pills"></i> Medicine Orders</li>
            <li><i class="fas fa-calendar-check"></i> Test Bookings</li>
            <li><i class="fas fa-lock"></i> Privacy & Policy</li>
            <li><i class="fas fa-question-circle"></i> Help Center</li>
            <li><i class="fas fa-cog"></i> Settings</li>
        </ul>
        <button class="logout" onclick='goTo(event, "/Login")'><i class="fas fa-sign-out-alt"></i> Logout</button>
    </div>
<script type="module">
    import {router} from "/src/js/app/router.js";
        const sidebar = document.querySelector(".sidebar");
        const userBtn = document.querySelector(".user");
        const closeBtn = document.querySelector(".close-btn");
    const username = document.querySelector("#username");
    const medical_link = document.querySelector("#medical-link");

        userBtn.addEventListener("click", () => {
            sidebar.classList.add("active");
        });

        closeBtn.addEventListener("click", () => {
            sidebar.classList.remove("active");
        });

        const userData = JSON.parse(localStorage.getItem("userData")) || {};
        username.innerHTML = userData.infoUser.username
        document.getElementById("details_name").innerHTML = userData.infoUser.username
        const userImgs = document.querySelectorAll(".userImg");
        const imageUrl = "http://127.0.0.1:8000/" + userData.infoPatient.image;

        userImgs.forEach(img => {
            if (userData.infoPatient.image) {
                img.src = imageUrl;
            }
        });
        if(userData.isDoctor){
            medical_link.classList.remove("d-none")
        }

        function goTo(event, url) {
            event.preventDefault();

            history.pushState(null, '', url);
            location.reload();

            router();
        }

        window.goTo = goTo;
</script>
</div>